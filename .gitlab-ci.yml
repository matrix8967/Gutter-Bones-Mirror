update_scrolls_submodule:
  image: alpine:latest
  script:
    - apk add git openssh
    - git config --global user.email "ci-bot@gitlab.com"
    - git config --global user.name "GitLab CI Bot"
    - git submodule update --remote --merge
    - git add roles/scrolls
    - git commit -m "Auto-update scrolls submodule" || echo "No changes"
    - git push https://gitlab-ci-token:${CI_PUSH_TOKEN}@gitlab.com/matrix8967/gutter_bonez.git HEAD:main
  only:
    - main

lint:
  image: python:3.12-slim
  before_script:
    - pip install --no-cache-dir ansible==9.7.0 ansible-core==2.16.8 ansible-lint==24.6.0 yamllint==1.35.1 pre-commit==3.7.1
  script:
    - pre-commit run --all-files
  only:
    - merge_requests
    - branches
  except:
    - main

